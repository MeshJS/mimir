# =============================================================================
# mimir-rag Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# Generate API key: npm run generate-apikey

# =============================================================================
# REQUIRED SETTINGS - Start Here
# =============================================================================

# Server API Key (REQUIRED)
# Generate one with: npm run generate-apikey
MIMIR_SERVER_API_KEY=your_generated_api_key_here

# Supabase Configuration (REQUIRED)
MIMIR_SUPABASE_URL=https://your-project-id.supabase.co
MIMIR_SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
MIMIR_SUPABASE_DB_PASSWORD=your_database_password

# LLM Configuration (REQUIRED)
# Embedding model - used to create vector embeddings for search
MIMIR_LLM_EMBEDDING_PROVIDER=openai
MIMIR_LLM_EMBEDDING_MODEL=text-embedding-3-large
MIMIR_LLM_EMBEDDING_API_KEY=sk-your-openai-key

# Chat model - used for generating answers
MIMIR_LLM_CHAT_PROVIDER=openai
MIMIR_LLM_CHAT_MODEL=gpt-4o-mini
MIMIR_LLM_CHAT_API_KEY=sk-your-openai-key

# GitHub Repository (REQUIRED)
# Main repository URL - used for both docs and code if separate repos not specified
MIMIR_GITHUB_URL=https://github.com/owner/repo

# =============================================================================
# GITHUB CONFIGURATION
# =============================================================================
# Configure where to fetch documentation (MDX) and code (TypeScript) from

# --- Scenario 1: Same Repository for Code and Docs ---
# If your code and docs are in the same repo, just set the main URL above
# Optionally specify subdirectories:
# MIMIR_GITHUB_DIRECTORY=docs                    # Subdirectory to index (for both)
# MIMIR_GITHUB_INCLUDE_DIRECTORIES=packages/utils,packages/core  # Only index these folders (TypeScript only)

# --- Scenario 2: Separate Repositories ---
# If code and docs are in different repos, configure them separately:

# Code Repository (TypeScript files)
# MIMIR_GITHUB_CODE_URL=https://github.com/owner/code-repo
# MIMIR_GITHUB_CODE_DIRECTORY=packages           # Subdirectory in code repo
# MIMIR_GITHUB_CODE_INCLUDE_DIRECTORIES=packages/utils,packages/core  # Only these folders

# Docs Repository (MDX files)
# MIMIR_GITHUB_DOCS_URL=https://github.com/owner/docs-repo
# MIMIR_GITHUB_DOCS_DIRECTORY=content            # Subdirectory in docs repo

# --- Common GitHub Settings ---
# MIMIR_GITHUB_BRANCH=main                       # Branch to use (default: "main")
# MIMIR_GITHUB_TOKEN=ghp_xxxxxxxxxxxx           # GitHub token for private repos or higher rate limits
# MIMIR_GITHUB_OUTPUT_DIR=./tmp/github-cache    # Local cache directory

# =============================================================================
# TYPESCRIPT PARSER CONFIGURATION
# =============================================================================
# Control how TypeScript files are parsed and indexed

# MIMIR_EXTRACT_VARIABLES=false                 # Extract top-level variables (default: false)
# MIMIR_EXTRACT_METHODS=true                    # Extract class methods separately (default: true)
# MIMIR_EXCLUDE_PATTERNS=*.test.ts,*.spec.ts   # File patterns to exclude (comma-separated)

# =============================================================================
# SUPABASE ADVANCED SETTINGS
# =============================================================================
# Fine-tune search and retrieval behavior

# MIMIR_SUPABASE_TABLE=docs                     # Table name (default: "docs")
# MIMIR_SUPABASE_SIMILARITY_THRESHOLD=0.2       # Minimum similarity for matches (default: 0.2)
# MIMIR_SUPABASE_MATCH_COUNT=10                  # Number of results to return (default: 10)
# MIMIR_SUPABASE_BM25_MATCH_COUNT=10            # BM25 keyword search results (default: 10)
# MIMIR_SUPABASE_ENABLE_HYBRID_SEARCH=true       # Combine vector + keyword search (default: true)

# =============================================================================
# LLM ADVANCED SETTINGS
# =============================================================================

# Embedding Model Settings
# MIMIR_LLM_EMBEDDING_BASE_URL=https://api.openai.com/v1
# MIMIR_LLM_EMBEDDING_LIMITS_BATCH_SIZE=100
# MIMIR_LLM_EMBEDDING_LIMITS_CONCURRENCY=8
# MIMIR_LLM_EMBEDDING_LIMITS_MAX_REQUESTS_PER_MINUTE=1500
# MIMIR_LLM_EMBEDDING_LIMITS_MAX_TOKENS_PER_MINUTE=6250000
# MIMIR_LLM_EMBEDDING_LIMITS_RETRIES=1

# Chat Model Settings
# MIMIR_LLM_CHAT_BASE_URL=https://api.openai.com/v1
# MIMIR_LLM_CHAT_TEMPERATURE=0                  # Response creativity (default: 0)
# MIMIR_LLM_CHAT_MAX_OUTPUT_TOKENS=8000         # Max response length (default: 8000)
# MIMIR_LLM_CHAT_LIMITS_CONCURRENCY=8
# MIMIR_LLM_CHAT_LIMITS_MAX_REQUESTS_PER_MINUTE=500
# MIMIR_LLM_CHAT_LIMITS_MAX_TOKENS_PER_MINUTE=90000
# MIMIR_LLM_CHAT_LIMITS_RETRIES=5

# =============================================================================
# DOCUMENTATION SETTINGS
# =============================================================================
# Configure documentation links in responses

# MIMIR_DOCS_BASE_URL=https://docs.example.com   # Base URL for docs site
# MIMIR_DOCS_CONTENT_PATH=/docs                 # Path prefix for content

# =============================================================================
# SERVER ADVANCED SETTINGS
# =============================================================================

# MIMIR_SERVER_GITHUB_WEBHOOK_SECRET=your_webhook_secret  # For automatic ingestion via webhooks
# MIMIR_SERVER_FALLBACK_INGEST_INTERVAL_MINUTES=60        # Auto-ingestion interval

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# MIMIR_LOGGING_LEVEL=info                      # Log level: fatal, error, warn, info, debug, trace
# MIMIR_LOGGING_PRETTY=true                     # Pretty print logs (default: true)

# =============================================================================
# ALTERNATIVE LLM PROVIDERS
# =============================================================================
# Uncomment and configure to use different providers

# --- Google ---
# MIMIR_LLM_EMBEDDING_PROVIDER=google
# MIMIR_LLM_EMBEDDING_MODEL=text-embedding-004
# MIMIR_LLM_EMBEDDING_API_KEY=your-google-api-key
# MIMIR_LLM_CHAT_PROVIDER=google
# MIMIR_LLM_CHAT_MODEL=gemini-1.5-pro
# MIMIR_LLM_CHAT_API_KEY=your-google-api-key

# --- Anthropic ---
# MIMIR_LLM_EMBEDDING_PROVIDER=anthropic
# MIMIR_LLM_EMBEDDING_MODEL=text-embedding-3-large
# MIMIR_LLM_EMBEDDING_API_KEY=sk-ant-your-key
# MIMIR_LLM_CHAT_PROVIDER=anthropic
# MIMIR_LLM_CHAT_MODEL=claude-3-5-sonnet-20241022
# MIMIR_LLM_CHAT_API_KEY=sk-ant-your-key

# --- Mistral ---
# MIMIR_LLM_EMBEDDING_PROVIDER=mistral
# MIMIR_LLM_EMBEDDING_MODEL=mistral-embed
# MIMIR_LLM_EMBEDDING_API_KEY=your-mistral-key
# MIMIR_LLM_CHAT_PROVIDER=mistral
# MIMIR_LLM_CHAT_MODEL=pixtral-12b-2409
# MIMIR_LLM_CHAT_API_KEY=your-mistral-key

# =============================================================================
# DATABASE URL (Alternative to MIMIR_SUPABASE_DB_PASSWORD)
# =============================================================================
# If you prefer to provide the full database URL instead of letting the system
# construct it from MIMIR_SUPABASE_URL:
# DATABASE_URL=postgresql://postgres:password@db.your-project.supabase.co:5432/postgres
