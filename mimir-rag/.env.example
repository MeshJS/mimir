# mimir-rag Configuration Example
# Copy this file to .env and fill in your values

# =============================================================================
# Server Configuration
# =============================================================================
MIMIR_SERVER_API_KEY=your_generated_api_key_here
# Generate with: npm run generate-apikey

# Optional: GitHub webhook secret for automatic ingestion
# MIMIR_SERVER_GITHUB_WEBHOOK_SECRET=your_webhook_secret

# Optional: Fallback ingestion interval (minutes)
# MIMIR_SERVER_FALLBACK_INGEST_INTERVAL_MINUTES=60

# =============================================================================
# Supabase Configuration
# =============================================================================
MIMIR_SUPABASE_URL=https://your-project-id.supabase.co
MIMIR_SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# Optional: Supabase anonymous key
# MIMIR_SUPABASE_ANON_KEY=your_anon_key

# Optional: Custom table name (default: "docs")
# MIMIR_SUPABASE_TABLE=docs

# Optional: Similarity threshold for vector search (default: 0.2)
# MIMIR_SUPABASE_SIMILARITY_THRESHOLD=0.2

# Optional: Number of matches to return (default: 10)
# MIMIR_SUPABASE_MATCH_COUNT=10

# Optional: BM25 keyword search match count (default: 10)
# MIMIR_SUPABASE_BM25_MATCH_COUNT=10

# Optional: Enable hybrid search (vector + BM25) (default: true)
# MIMIR_SUPABASE_ENABLE_HYBRID_SEARCH=true

# =============================================================================
# Database URL (for automatic schema setup)
# =============================================================================
# Option 1: Automatic (recommended) - system constructs from MIMIR_SUPABASE_URL
MIMIR_SUPABASE_DB_PASSWORD=your_database_password

# Option 2: Manual - provide full database URL
# DATABASE_URL=postgresql://postgres:password@db.your-project.supabase.co:5432/postgres

# =============================================================================
# GitHub Configuration
# =============================================================================
# Main GitHub URL (used for both docs and code if separate URLs not specified)
MIMIR_GITHUB_URL=https://github.com/owner/repo

# Optional: Separate repository for TypeScript code
# If not set, uses MIMIR_GITHUB_URL for code
# MIMIR_GITHUB_CODE_URL=https://github.com/owner/code-repo

# Optional: Separate repository for MDX documentation
# If not set, uses MIMIR_GITHUB_URL for docs
# MIMIR_GITHUB_DOCS_URL=https://github.com/owner/docs-repo

# Optional: Subdirectory to index (e.g., "docs" or "packages")
# MIMIR_GITHUB_DIRECTORY=docs

# Optional: Branch to use (default: "main")
# MIMIR_GITHUB_BRANCH=main

# Optional: GitHub token for private repos or higher rate limits
# MIMIR_GITHUB_TOKEN=ghp_xxxxxxxxxxxx

# Optional: Local cache directory for downloaded files
# MIMIR_GITHUB_OUTPUT_DIR=./tmp/github-cache

# Optional: Comma-separated list of directories to include (for TypeScript files)
# Only files within these directories will be indexed
# Example: "packages/utils,packages/core"
# MIMIR_GITHUB_INCLUDE_DIRECTORIES=packages/utils,packages/core

# =============================================================================
# TypeScript Parser Configuration
# =============================================================================
# Optional: Extract top-level variable/constant declarations (default: false)
# MIMIR_EXTRACT_VARIABLES=false

# Optional: Extract class methods as separate entities (default: true)
# MIMIR_EXTRACT_METHODS=true

# Optional: Comma-separated file patterns to exclude
# Example: "*.test.ts,*.spec.ts,*.d.ts"
# MIMIR_EXCLUDE_PATTERNS=*.test.ts,*.spec.ts

# =============================================================================
# Documentation Configuration
# =============================================================================
# Optional: Base URL for documentation links
# MIMIR_DOCS_BASE_URL=https://docs.example.com

# Optional: Content path prefix for documentation
# MIMIR_DOCS_CONTENT_PATH=/docs

# =============================================================================
# LLM Configuration - Embedding Model
# =============================================================================
MIMIR_LLM_EMBEDDING_PROVIDER=openai
MIMIR_LLM_EMBEDDING_MODEL=text-embedding-3-large
MIMIR_LLM_EMBEDDING_API_KEY=sk-your-openai-key

# Optional: Custom base URL for embedding API
# MIMIR_LLM_EMBEDDING_BASE_URL=https://api.openai.com/v1

# Optional: Embedding rate limits
# MIMIR_LLM_EMBEDDING_LIMITS_BATCH_SIZE=100
# MIMIR_LLM_EMBEDDING_LIMITS_CONCURRENCY=8
# MIMIR_LLM_EMBEDDING_LIMITS_MAX_REQUESTS_PER_MINUTE=1500
# MIMIR_LLM_EMBEDDING_LIMITS_MAX_TOKENS_PER_MINUTE=6250000
# MIMIR_LLM_EMBEDDING_LIMITS_RETRIES=1

# =============================================================================
# LLM Configuration - Chat Model
# =============================================================================
MIMIR_LLM_CHAT_PROVIDER=openai
MIMIR_LLM_CHAT_MODEL=gpt-4o-mini
MIMIR_LLM_CHAT_API_KEY=sk-your-openai-key

# Optional: Custom base URL for chat API
# MIMIR_LLM_CHAT_BASE_URL=https://api.openai.com/v1

# Optional: Chat model temperature (default: 0)
# MIMIR_LLM_CHAT_TEMPERATURE=0

# Optional: Maximum output tokens (default: 8000)
# MIMIR_LLM_CHAT_MAX_OUTPUT_TOKENS=8000

# Optional: Chat rate limits
# MIMIR_LLM_CHAT_LIMITS_CONCURRENCY=8
# MIMIR_LLM_CHAT_LIMITS_MAX_REQUESTS_PER_MINUTE=500
# MIMIR_LLM_CHAT_LIMITS_MAX_TOKENS_PER_MINUTE=90000
# MIMIR_LLM_CHAT_LIMITS_RETRIES=5

# =============================================================================
# Logging Configuration
# =============================================================================
# Optional: Log level (fatal, error, warn, info, debug, trace) (default: "info")
# MIMIR_LOGGING_LEVEL=info

# Optional: Pretty print logs (default: true)
# MIMIR_LOGGING_PRETTY=true

# =============================================================================
# Alternative LLM Providers
# =============================================================================
# For Google:
# MIMIR_LLM_EMBEDDING_PROVIDER=google
# MIMIR_LLM_EMBEDDING_MODEL=text-embedding-004
# MIMIR_LLM_EMBEDDING_API_KEY=your-google-api-key
# MIMIR_LLM_CHAT_PROVIDER=google
# MIMIR_LLM_CHAT_MODEL=gemini-1.5-pro
# MIMIR_LLM_CHAT_API_KEY=your-google-api-key

# For Anthropic:
# MIMIR_LLM_EMBEDDING_PROVIDER=anthropic
# MIMIR_LLM_EMBEDDING_MODEL=text-embedding-3-large
# MIMIR_LLM_EMBEDDING_API_KEY=sk-ant-your-key
# MIMIR_LLM_CHAT_PROVIDER=anthropic
# MIMIR_LLM_CHAT_MODEL=claude-3-5-sonnet-20241022
# MIMIR_LLM_CHAT_API_KEY=sk-ant-your-key

# For Mistral:
# MIMIR_LLM_EMBEDDING_PROVIDER=mistral
# MIMIR_LLM_EMBEDDING_MODEL=mistral-embed
# MIMIR_LLM_EMBEDDING_API_KEY=your-mistral-key
# MIMIR_LLM_CHAT_PROVIDER=mistral
# MIMIR_LLM_CHAT_MODEL=pixtral-12b-2409
# MIMIR_LLM_CHAT_API_KEY=your-mistral-key
